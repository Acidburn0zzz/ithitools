<html>
<head>

<title>ITHI Metric M8</title>

<link rel="stylesheet" type="text/css" href="ithistyle.css">

<script src="ithinav.js"></script>

<script type="text/javascript">

    var canvas ;
    var context ;
    var Val_max;
    var Val_min;
    var sections;
    var xScale;
    var yScale;

    var M8Data; // Will be obtained from the web server.

    function init() {
        initnav();
        loadDoc();
    }

    function loadDoc() {
        var xhttp = new XMLHttpRequest();
        xhttp.onreadystatechange = function() {
            if (this.readyState == 4 && this.status == 200) {
                M8Data = JSON.parse(this.responseText);
                draw_page();
            }
        };
        xhttp.open("GET", "M8Data.txt", true);
        xhttp.send();
    }

    function draw_page() {
        // set these values for your data

        setDateElement(M8Data.date);
        elementRefList = ["valM81", "valM82", "valM83"];
        elementAverageList = ["averageM81", "averageM82", "averageM83"];
        
        for (i = 0; i < 3; i++) {
            setValElement(elementRefList[i], getLastElement(M8Data.M8DataSet[i]));
            setValElement(elementAverageList[i], getAverageElement(M8Data.M8DataSet[i]));
        }
    }
    
    function setDateElement(date) {
        dateElement = document.getElementById("dateHeading");
        dateElement.innerHTML = date;
    }

    function setValElement(valElementId, x) {
        elm = document.getElementById(valElementId);

        if (x.toFixed(2)) {
            elm.innerHTML = "<b>" + x.toFixed(2) + "%</b>";
        }
        else {
            elm.innerHTML = "<b>" + x + "</b>";
        }
    }

    function getLastElement(dataSet) {
        if (dataSet.length < 1) {
            return "-";
        }
        else {
            return dataSet[dataSet.length - 1];
        }
    }

    function getAverageElement(dataSet) {
        if (dataSet.length <= 2) {
            return dataSet[0];
        }
        else {
            var i = 0;

            last = dataSet.length - 2;
            first = 0;
            if (dataSet.length > 13) {
                first = dataSet.length - 13;
            }
            average = 0;
            for (i = first; i <= last; i++) {
                average += dataSet[i];
            }
            average /= (last + 1 - first);

            return average;
        }
    }

</script>
</head>

<body onLoad="init()">

    <nav id="navMenu"></nav>

    <h1>M8: DNS Authoritative Servers Analysis</h1>
    <h2 id="dateHeading">-</h2>
    <p>
The M8 metrics analyze the DNS traffic at Authoritative Servers. The
data collected by participating servers gives us a good statistical
sampling of that traffic originating from recursive resolvers, or
from clients interacting directly with authoritative servers.
We track this behavior with three metrics:
    </p>
    <ul>
        <li>
            M8.1: the fraction of queries that trigger an NX_DOMAIN responses.
        </li>
        <li>
            M8.2: the fraction of queries that use Extended DNS (EDNS).
        </li>
        <li>
            M8.3: the fraction of DNS Resolvers ready for DNSSEC.
            We compute the ratio of the number of resolvers that sent requests with the EDNS "DNSSEC OK"
            option set, over the total number of resolvers that contact the authoritative servers.
            Resolvers are identified by IP address,
            and a given IP address is only counted once. The ratios measured at different authoritative
            servers are then averaged to compute the metric.
        </li>
    </ul>
    <p>
        In the following table, the <em>current value</em> is the
        value of the metric for the current month.
        The <em>average value</em> is the average value of that metric
        over the 12 months preceeding this one -- or the average since the beginning
        of measurements if measurements started fewer than 12 months ago.
    </p>

    <table class="metrics">
        <tr>
            <th></th>
            <th class="number">Current value</th>
            <th class="number">Average value</th>
        </tr>
        <tr>
            <td>
                M8.1: % NX Domain Queries at Authoritative
            </td>
            <td class="number" id="valM81">
                -
            </td>
            <td class="number" id="averageM81">
                -
            </td>
        </tr>
        <tr>
            <td>
                M8.2: % of queries using EDNS
            </td>
            <td class="number" id="valM82">
                -
            </td>
            <td class="number" id="averageM82">
                -
            </td>
        </tr>
        <tr>
            <td>
                M8.3: % of resolvers setting DNSSEC OK option
            </td>
            <td class="number" id="valM83">
                -
            </td>
            <td class="number" id="averageM83">
                -
            </td>
        </tr>
    </table>
</body>
</html>